import{r as b,a as T,o as x,c as _,b as h,u as N,t as k,d as W,e as O,w as R,F as U,f as X,p as Y,g as $,h as j}from"./index.0524a9cb.js";import{_ as z}from"./_plugin-vue_export-helper.cdc0426e.js";const J=d=>(Y("data-v-f94c527c"),d=d(),$(),d),K={key:0},Q={style:{"margin-top":"10px"}},Z={key:0},tt={key:1},et=J(()=>h("canvas",null,null,-1)),at={__name:"game",setup(d){let r=b(0),C=b(!0),u=b(!1),V=localStorage.getItem("maxScore");const F=()=>{j.push("/")};document.oncontextmenu=function(){return!1},document.addEventListener("selectstart",function(s){s.preventDefault()});const P=()=>{C.value=!1;let s=document.querySelector("canvas"),o=s.getContext("2d"),w=window.innerWidth,M=window.innerHeight;s.width=w,s.height=M;class p{constructor(t,e,a,i,n){this.x=t,this.y=e,this.radius=a,this.color=i,this.velocity=n}draw(){o.beginPath(),o.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill()}ai(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class H extends p{constructor(t,e,a,i){super(t,e,a,i),this.draw()}}class q extends p{constructor(t,e,a,i,n){super(t,e,a,i,n)}}class D extends p{constructor(t,e,a,i,n){super(t,e,a,i,n)}}class L extends p{constructor(t,e,a,i,n,g){super(t,e,a,i,n),this.x=t,this.y=e,this.radius=a,this.color=i,this.velocity=n,this.alpha=1,this.friction=g}draw(){o.save(),o.globalAlpha=this.alpha,o.beginPath(),o.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill(),o.restore()}ai(){this.draw(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}let c=[],f=[],S=[],y=!0;function A(){y&&requestAnimationFrame(A),o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,s.width,s.height);let l=new H(s.width/2,s.height/2,20,"white");c.map((t,e)=>{console.log(t,e),t.ai(),(t.x<=0-t.radius||t.y<=0-t.radius||t.x>=s.width||t.y>=s.height)&&c.splice(e,1),f.map((a,i)=>{if(Math.hypot(a.x-t.x,a.y-t.y)-t.radius-a.radius<1){for(let g=0;g<t.radius*8;g++)S.push(new L(a.x,a.y,Math.random()*4,a.color,{x:(Math.random()-.5)*(Math.random()*6),y:(Math.random()-.5)*(Math.random()*6)},.97));a.radius-16>10?(a.radius-=16,c.splice(e,1),r.value+=100):(c.splice(e,1),f.splice(i,1),r.value+=250)}})}),f.map(t=>{t.ai(),Math.hypot(l.x-t.x,l.y-t.y)-t.radius-l.radius<1&&(y=!1,u.value=!0,console.log("\u6E38\u620F\u7ED3\u675F"))}),S.map((t,e)=>{t.alpha<=0?S.splice(e,1):t.ai()})}A(),window.addEventListener("mousedown",l=>{if(!y)return;let t=Math.atan2(l.clientY-s.height/2,l.clientX-s.width/2),e={x:Math.cos(t)*8,y:Math.sin(t)*8};c.push(new D(s.width/2,s.height/2,5,"white",e))});let m=0,v=2e3,I=20;const B=function(){if(clearInterval(E),m++,m===20&&(v/=1.15,I+=7,m=0),console.log(v,m,I),!y)return;let l=Math.random()*I+15,t=`hsl(${Math.random()*360}, 50%, 50%)`,e,a;Math.random()<.5?(e=Math.random()<.5?0-l:s.width+l,a=Math.random()*s.height+l):(e=Math.random()*s.width+l,a=Math.random()<.5?0-l:s.height+l);let i=Math.atan2(s.height/2-a,s.width/2-e),n={x:Math.cos(i)*2.5,y:Math.sin(i)*2.5};f.push(new q(e,a,l,t,n)),E=setInterval(B,v)};let E=setTimeout(B,v)},G=()=>{u.value=!1,localStorage.getItem("maxScore")<r.value&&localStorage.setItem("maxScore",r.value.toString()),r.value=0,P()};return(s,o)=>{const w=T("el-dialog");return x(),_(U,null,[C.value?(x(),_("div",K,[h("button",{onClick:P},"\u5F00\u59CB\u6E38\u620F"),h("div",Q,[N(V)>0?(x(),_("span",Z,"\u5386\u53F2\u6700\u9AD8\u5206\uFF1A"+k(N(V)),1)):(x(),_("span",tt,"\u5206\u6570\uFF1A"+k(r.value),1))])])):W("",!0),et,O(w,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=M=>u.value=M),"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,title:"\u63D0\u793A",width:"30%"},{default:R(()=>[h("h1",null,[X("\u4F60\u7684\u5206\u6570\u662F\uFF1A"),h("span",null,k(r.value),1)]),h("button",{onClick:G},"\u91CD \u65B0 \u5F00 \u59CB"),h("button",{onClick:F},"\u56DE\u5230\u9996\u9875")]),_:1},8,["modelValue"])],64)}}},ot=z(at,[["__scopeId","data-v-f94c527c"]]);export{ot as default};
