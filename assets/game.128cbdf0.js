import{u as F,r as _,a as G,o as I,c as S,b as g,d as r,t as C,e as T,f as q,w as H,i as L,F as R,g as W,p as j,h as O,j as U}from"./index.8c26b63f.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const Y=u=>(j("data-v-239977a0"),u=u(),O(),u),z={key:0},J={style:{"margin-top":"10px"}},K=Y(()=>r("canvas",null,null,-1)),Q={__name:"game",setup(u){const V=F();let c=_(0),M=_(!0),h=_(!1);const P=()=>{const e=U(V);console.log(e())};document.oncontextmenu=function(){return!1},document.addEventListener("selectstart",function(e){e.preventDefault()});const k=()=>{M.value=!1;let e=document.querySelector("canvas"),l=e.getContext("2d"),x=window.innerWidth,p=window.innerHeight;e.width=x,e.height=p;class y{constructor(t,s,a,o,n){this.x=t,this.y=s,this.radius=a,this.color=o,this.velocity=n}draw(){l.beginPath(),l.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),l.fillStyle=this.color,l.fill()}ai(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class A extends y{constructor(t,s,a,o){super(t,s,a,o),this.draw()}}class B extends y{constructor(t,s,a,o,n){super(t,s,a,o,n)}}class E extends y{constructor(t,s,a,o,n){super(t,s,a,o,n)}}class N extends y{constructor(t,s,a,o,n,w){super(t,s,a,o,n),this.x=t,this.y=s,this.radius=a,this.color=o,this.velocity=n,this.alpha=1,this.friction=w}draw(){l.save(),l.globalAlpha=this.alpha,l.beginPath(),l.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),l.fillStyle=this.color,l.fill(),l.restore()}ai(){this.draw(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}let d=[],f=[],v=[],m=!0;function b(){m&&requestAnimationFrame(b),l.fillStyle="rgba(0, 0, 0, .1)",l.fillRect(0,0,e.width,e.height);let i=new A(e.width/2,e.height/2,20,"white");d.map((t,s)=>{t.ai(),(t.x<=0-t.radius||t.y<=0-t.radius||t.x>=e.width||t.y>=e.height)&&d.splice(s,1),f.map((a,o)=>{if(Math.hypot(a.x-t.x,a.y-t.y)-t.radius-a.radius<1){for(let w=0;w<t.radius*8;w++)v.push(new N(a.x,a.y,Math.random()*4,a.color,{x:(Math.random()-.5)*(Math.random()*6),y:(Math.random()-.5)*(Math.random()*6)},.97));a.radius-16>10?(a.radius-=16,d.splice(s,1),c.value+=100):(d.splice(s,1),f.splice(o,1),c.value+=250)}})}),f.map(t=>{t.ai(),Math.hypot(i.x-t.x,i.y-t.y)-t.radius-i.radius<1&&(m=!1,h.value=!0,console.log("\u6E38\u620F\u7ED3\u675F"))}),v.map((t,s)=>{t.alpha<=0?v.splice(s,1):t.ai()})}b(),window.addEventListener("mousedown",i=>{if(!m)return;let t=Math.atan2(i.clientY-e.height/2,i.clientX-e.width/2),s={x:Math.cos(t)*8,y:Math.sin(t)*8};d.push(new E(e.width/2,e.height/2,5,"white",s))}),setInterval(()=>{if(!m)return;let i=Math.random()*(35-15)+15,t=`hsl(${Math.random()*360}, 50%, 50%)`,s,a;Math.random()<.5?(s=Math.random()<.5?0-i:e.width+i,a=Math.random()*e.height+i):(s=Math.random()*e.width+i,a=Math.random()<.5?0-i:e.height+i);let o=Math.atan2(e.height/2-a,e.width/2-s),n={x:Math.cos(o)*2.5,y:Math.sin(o)*2.5};f.push(new B(s,a,i,t,n))},2e3)},D=()=>{h.value=!1,c.value=0,k()};return(e,l)=>{const x=G("el-dialog");return I(),S(R,null,[g(M)?(I(),S("div",z,[r("button",{onClick:P},"\u5207\u6362\u4E3B\u9898"),r("button",{onClick:k},"\u5F00\u59CB\u6E38\u620F"),r("div",J,[r("span",null,"\u5206\u6570\uFF1A"+C(g(c)),1)])])):T("",!0),K,q(x,{"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"\u63D0\u793A",width:"30%",modelValue:g(h),"onUpdate:modelValue":l[0]||(l[0]=p=>L(h)?h.value=p:h=p)},{default:H(()=>[r("h1",null,[W("\u4F60\u7684\u5206\u6570\u662F\uFF1A"),r("span",null,C(g(c)),1)]),r("button",{onClick:D},"\u91CD \u65B0 \u5F00 \u59CB")]),_:1},8,["modelValue"])],64)}}},tt=X(Q,[["__scopeId","data-v-239977a0"]]);export{tt as default};
