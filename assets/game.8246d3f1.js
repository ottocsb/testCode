import{u as R,r as b,a as W,o as _,c as M,b as d,d as h,t as C,e as j,f as O,w as U,i as X,F as Y,g as z,p as J,h as K,j as Q}from"./index.576515f8.js";import{_ as Z}from"./_plugin-vue_export-helper.cdc0426e.js";const $=p=>(J("data-v-e918a156"),p=p(),K(),p),tt={key:0},et={style:{"margin-top":"10px"}},at={key:0},st={key:1},lt=$(()=>h("canvas",null,null,-1)),ot={__name:"game",setup(p){const N=R();let n=b(0),V=b(!0),c=b(!1);localStorage.setItem("maxScore",n.value.toString());let P=localStorage.getItem("maxScore");const T=()=>{const e=Q(N);console.log(e())};document.oncontextmenu=function(){return!1},document.addEventListener("selectstart",function(e){e.preventDefault()});const D=()=>{V.value=!1;let e=document.querySelector("canvas"),o=e.getContext("2d"),S=window.innerWidth,m=window.innerHeight;e.width=S,e.height=m;class y{constructor(t,a,s,i,r){this.x=t,this.y=a,this.radius=s,this.color=i,this.velocity=r}draw(){o.beginPath(),o.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill()}ai(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class G extends y{constructor(t,a,s,i){super(t,a,s,i),this.draw()}}class q extends y{constructor(t,a,s,i,r){super(t,a,s,i,r)}}class H extends y{constructor(t,a,s,i,r){super(t,a,s,i,r)}}class L extends y{constructor(t,a,s,i,r,w){super(t,a,s,i,r),this.x=t,this.y=a,this.radius=s,this.color=i,this.velocity=r,this.alpha=1,this.friction=w}draw(){o.save(),o.globalAlpha=this.alpha,o.beginPath(),o.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill(),o.restore()}ai(){this.draw(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}let u=[],f=[],I=[],g=!0;function A(){g&&requestAnimationFrame(A),o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,e.width,e.height);let l=new G(e.width/2,e.height/2,20,"white");u.map((t,a)=>{t.ai(),(t.x<=0-t.radius||t.y<=0-t.radius||t.x>=e.width||t.y>=e.height)&&u.splice(a,1),f.map((s,i)=>{if(Math.hypot(s.x-t.x,s.y-t.y)-t.radius-s.radius<1){for(let w=0;w<t.radius*8;w++)I.push(new L(s.x,s.y,Math.random()*4,s.color,{x:(Math.random()-.5)*(Math.random()*6),y:(Math.random()-.5)*(Math.random()*6)},.97));s.radius-16>10?(s.radius-=16,u.splice(a,1),n.value+=100):(u.splice(a,1),f.splice(i,1),n.value+=250)}})}),f.map(t=>{t.ai(),Math.hypot(l.x-t.x,l.y-t.y)-t.radius-l.radius<1&&(g=!1,c.value=!0,console.log("\u6E38\u620F\u7ED3\u675F"))}),I.map((t,a)=>{t.alpha<=0?I.splice(a,1):t.ai()})}A(),window.addEventListener("mousedown",l=>{if(!g)return;let t=Math.atan2(l.clientY-e.height/2,l.clientX-e.width/2),a={x:Math.cos(t)*8,y:Math.sin(t)*8};u.push(new H(e.width/2,e.height/2,5,"white",a))});let x=0,v=2e3,k=20;const B=function(){if(clearInterval(E),x++,x===20&&(v/=1.15,k+=7,x=0),console.log(v,x,k),!g)return;let l=Math.random()*k+15,t=`hsl(${Math.random()*360}, 50%, 50%)`,a,s;Math.random()<.5?(a=Math.random()<.5?0-l:e.width+l,s=Math.random()*e.height+l):(a=Math.random()*e.width+l,s=Math.random()<.5?0-l:e.height+l);let i=Math.atan2(e.height/2-s,e.width/2-a),r={x:Math.cos(i)*2.5,y:Math.sin(i)*2.5};f.push(new q(a,s,l,t,r)),E=setInterval(B,v)};let E=setTimeout(B,v)},F=()=>{c.value=!1,localStorage.getItem("maxScore")<n.value&&localStorage.setItem("maxScore",n.value.toString()),n.value=0,D()};return(e,o)=>{const S=W("el-dialog");return _(),M(Y,null,[d(V)?(_(),M("div",tt,[h("button",{onClick:T},"\u5207\u6362\u4E3B\u9898"),h("button",{onClick:D},"\u5F00\u59CB\u6E38\u620F"),h("div",et,[d(P)>0?(_(),M("span",at,"\u5386\u53F2\u6700\u9AD8\u5206\uFF1A"+C(d(P)),1)):(_(),M("span",st,"\u5206\u6570\uFF1A"+C(d(n)),1))])])):j("",!0),lt,O(S,{modelValue:d(c),"onUpdate:modelValue":o[0]||(o[0]=m=>X(c)?c.value=m:c=m),"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,title:"\u63D0\u793A",width:"30%"},{default:U(()=>[h("h1",null,[z("\u4F60\u7684\u5206\u6570\u662F\uFF1A"),h("span",null,C(d(n)),1)]),h("button",{onClick:F},"\u91CD \u65B0 \u5F00 \u59CB")]),_:1},8,["modelValue"])],64)}}},nt=Z(ot,[["__scopeId","data-v-e918a156"]]);export{nt as default};
